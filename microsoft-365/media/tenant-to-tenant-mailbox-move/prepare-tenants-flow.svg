<svg xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink" width="1561.997" height="719.568" class="st28" color-interpolation-filters="sRGB" viewBox="0 0 1171.5 539.676" xml:space="preserve"><style type="text/css">.st1{fill:#4672c4;stroke:#c7c8c8;stroke-width:.25}.st2{fill:#feffff;font-family:Calibri;font-size:.833336em}.st3{font-size:1em}.st4{fill:#70ad47;stroke:#c7c8c8;stroke-width:.25}.st5,.st6{stroke:#fec000}.st5{marker-end:url(#mrkr4-19);stroke-linecap:round;stroke-linejoin:round;stroke-width:1}.st6{fill:#fec000;fill-opacity:1;stroke-opacity:1;stroke-width:.28409090909091}.st7{fill:#feffff;font-family:Calibri;font-size:1.00001em}.st8{fill:none;stroke:none;stroke-width:.25}.st9{fill:#4672c4;font-family:Calibri;font-size:.75em}.st10{fill:#ed7d31;stroke:#c7c8c8;stroke-width:.25}.st11,.st12{stroke:#70ad47}.st11{marker-end:url(#mrkr4-51);stroke-linecap:round;stroke-linejoin:round;stroke-width:1}.st12{fill:#70ad47;fill-opacity:1;stroke-opacity:1;stroke-width:.28409090909091}.st13{fill:url(#grad0-55);stroke:#3c63ac;stroke-width:.75}.st14,.st15,.st16{fill:#3c63ac;font-family:Calibri;font-size:.916672em}.st15,.st16{fill:#4672c4;font-size:1.00001em}.st16{fill:#3c63ac}.st17{fill:none;stroke-linecap:round;stroke-linejoin:round}.st18,.st19{stroke:#000;stroke-width:35}.st19{marker-start:url(#mrkr2-105);stroke-linecap:round;stroke-linejoin:round;stroke-width:1.2}.st20{fill:#000;fill-opacity:1;stroke:#000;stroke-opacity:1;stroke-width:.32258064516129}.st21{fill:#3c63ac;stroke:#30518f;stroke-width:.75}.st22{fill:none;stroke:#c7c8c8;stroke-width:.25}.st23{fill:#000;font-family:Calibri;font-size:1.5em}.st24{fill:#000;stroke:#30518f;stroke-width:.75}.st25{fill:#ffc000;stroke:#c7c8c8;stroke-width:.25}.st26{fill:#000;font-family:Calibri;font-size:1.00001em;font-weight:700}.st27{fill:#000;stroke:#31528f;stroke-width:.25}.st28{fill:none;fill-rule:evenodd;font-size:12px;overflow:visible;stroke-linecap:square;stroke-miterlimit:3}</style><defs id="Patterns_And_Gradients"><linearGradient id="grad0-55" x1="0" x2="1" y1="0" y2="0" gradientTransform="rotate(60 0.5 0.5)"><stop offset="0" stop-color="#e8ebf4" stop-opacity="1"/><stop offset=".24" stop-color="#f4f5f9" stop-opacity="1"/><stop offset=".54" stop-color="#feffff" stop-opacity="1"/></linearGradient></defs><defs id="Markers"><g id="lend4"><path style="stroke:none" d="M 2 1 L 0 0 L 2 -1 L 2 1"/></g><marker id="mrkr4-19" class="st6" markerUnits="strokeWidth" orient="auto" overflow="visible" refX="-7.04"><use transform="scale(-3.52,-3.52)" xlink:href="#lend4"/></marker><marker id="mrkr4-51" class="st12" markerUnits="strokeWidth" orient="auto" overflow="visible" refX="-7.04"><use transform="scale(-3.52,-3.52)" xlink:href="#lend4"/></marker><g id="lend2"><path style="stroke:none" d="M 1 1 L 0 0 L 1 -1 L 1 1"/></g><marker id="mrkr2-105" class="st20" markerUnits="strokeWidth" orient="auto" overflow="visible" refX="2.8"><use transform="scale(3.1)" xlink:href="#lend2"/></marker></defs><g><title>Page-1</title><g id="shape2010-1" transform="translate(603.75,-95.0662)"><title>Sheet.2010</title><desc>Mailboxes are pull from source to target</desc><rect width="88.817" height="50.481" x="0" y="489.195" class="st1"/><text x="7.14" y="505.44" class="st2">Mailboxes are pull <tspan x="14.37" class="st3" dy="1.2em">from source to </tspan><tspan x="32.08" class="st3" dy="1.2em">target</tspan></text></g><g id="shape1-6" transform="translate(703.429,-291.61)"><title>Triangle</title><path d="M377.32 539.68 L188.66 291.86 L0 539.68 L377.32 539.68 Z" class="st1"/></g><g id="shape14-8" transform="translate(848.012,-274.713)"><title>Rectangle.14</title><desc>EXO</desc><rect width="42.877" height="25.995" x="0" y="513.681" class="st4"/><text x="13.09" y="529.68" class="st2">EXO</text></g><g id="shape22-11" transform="translate(832.061,-391.69)"><title>Rectangle.22</title><desc>Tenant Relationship App</desc><rect width="120.057" height="25.995" x="0" y="513.681" class="st1"/><text x="10.18" y="529.68" class="st2">Tenant Relationship App</text></g><g id="shape23-14" transform="translate(860.45,-391.69)"><title>Dynamic connector.23</title><path d="M9 539.68 L9 623.62" class="st5"/></g><g id="shape29-20" transform="translate(857.788,-443.679)"><title>Sheet.29</title><desc>Source Tenant</desc><rect width="68.604" height="38.992" x="0" y="500.684" class="st1"/><text x="17.61" y="516.58" class="st7">Source <tspan x="17.2" class="st3" dy="1.2em">Tenant</tspan></text></g><g id="shape30-24" transform="translate(180.325,-274.453)"><title>Triangle.30</title><path d="M377.32 539.68 L188.66 291.86 L0 539.68 L377.32 539.68 Z" class="st1"/></g><g id="shape34-26" transform="translate(324.908,-257.557)"><title>Rectangle.34</title><desc>EXO</desc><rect width="42.877" height="25.995" x="0" y="513.681" class="st4"/><text x="13.09" y="529.68" class="st2">EXO</text></g><g id="shape38-29" transform="translate(308.958,-371.284)"><title>Rectangle.38</title><desc>Tenant Relationship App</desc><rect width="132.792" height="29.244" x="0" y="510.432" class="st1"/><text x="17.68" y="528.05" class="st2">Tenant Relationship App</text></g><g id="shape39-32" transform="translate(337.347,-374.533)"><title>Dynamic connector.39</title><path d="M9 539.68 L9 623.62" class="st5"/></g><g id="shape41-37" transform="translate(300.382,-212.066)"><title>Sheet.41</title><desc>EXO exposes Mailbox.Migration permission to TenantFriending A...</desc><rect width="102.906" height="38.992" x="0" y="500.684" class="st8"/><text x="4" y="512.78" class="st9">EXO exposes <tspan x="4" class="st3" dy="1.2em">Mailbox.Migration </tspan><tspan x="4" class="st3" dy="1.2em">permission to </tspan><tspan x="4" class="st3" dy="1.2em">TenantFriending App.</tspan></text></g><g id="shape42-43" transform="translate(381.849,-257.557)"><title>Rectangle.42</title><desc>MSGraph</desc><rect width="55.741" height="25.995" x="0" y="513.681" class="st10"/><text x="8.75" y="529.68" class="st2">MSGraph</text></g><g id="shape43-46" transform="translate(400.61,-371.284)"><title>Dynamic connector.43</title><path d="M8.89 539.68 L9.09 620.37" class="st11"/></g><g id="shape44-52" transform="translate(457.245,-372.241)"><title>Sheet.44</title><desc>Tenant Relationship App is assigned: - Mailbox.Migration perm...</desc><rect width="185.009" height="73.825" x="0" y="465.851" class="st13"/><text x="4" y="479.75" class="st14">Tenant Relationship App is assigned: <tspan x="4" class="st3" dy="1.2em">-</tspan> Mailbox.Migration permission on <tspan x="4" class="st3" dy="1.2em">exchange. (Required)</tspan><tspan x="4" class="st3" dy="1.2em">-</tspan> Directory.ReadWrite.All app <tspan x="4" class="st3" dy="1.2em">permission on MSGraph (Optional)</tspan></text></g><g id="shape45-61" transform="translate(334.684,-426.523)"><title>Sheet.45</title><desc>Target Tenant</desc><rect width="68.604" height="38.992" x="0" y="500.684" class="st1"/><text x="18.59" y="516.58" class="st7">Target <tspan x="17.2" class="st3" dy="1.2em">Tenant</tspan></text></g><g id="shape50-65" transform="translate(940.104,-475.67)"><title>Sheet.50</title><desc>Source tenant admin consents to TenantRelationship app.</desc><rect width="214.387" height="38.992" x="0" y="500.684" class="st8"/><text x="4" y="516.58" class="st15">Source tenant admin consents to <tspan x="4" class="st3" dy="1.2em">TenantRelationship app.</tspan></text></g><g id="shape51-69" transform="translate(144.75,-303)"><title>Sheet.51</title><desc>Target tenant sets up tenantrelationship app with permissions...</desc><rect width="120.057" height="162.515" x="0" y="377.162" class="st13"/><text x="4" y="390.02" class="st16">Target tenant sets up <tspan x="4" class="st3" dy="1.2em">tenantrelationship app </tspan><tspan x="4" class="st3" dy="1.2em">with permissions on </tspan><tspan x="4" class="st3" dy="1.2em">MSGraph and EXO and </tspan><tspan x="4" class="st3" dy="1.2em">consents to it.</tspan><tspan x="4" class="st3" dy="1.2em">App stores its </tspan><tspan x="4" class="st3" dy="1.2em">application secret </tspan><tspan x="4" class="st3" dy="1.2em">(cert) in keyvault and </tspan><tspan x="4" class="st3" dy="1.2em">gives Exchange service </tspan><tspan x="4" class="st3" dy="1.2em">principal permissions </tspan><tspan x="4" class="st3" dy="1.2em">to read the cert.</tspan></text></g><g id="shape52-83" transform="translate(380.369,-308.087)"><title>Sheet.52</title><rect width=".945" height=".716" x="0" y="538.96" class="st8"/><switch><g class="st17"><path d="M26737 -4171 h1" class="st18" transform="matrix(0.0283465,0,0,0.0283465,-757.449,657.532)"/></g></switch><rect width=".945" height=".716" x="0" y="538.96" class="st8"/></g><g id="shape53-86" transform="translate(374.67,-324.789)"><title>Sheet.53</title><rect width=".945" height=".716" x="0" y="538.96" class="st8"/><switch><g class="st17"><path d="M26536 -4760 h1" class="st18" transform="matrix(0.0283465,0,0,0.0283465,-751.75,674.234)"/></g></switch><rect width=".945" height=".716" x="0" y="538.96" class="st8"/></g><g id="shape54-89" transform="translate(379.531,-322.312)"><title>Sheet.54</title><rect width=".945" height=".716" x="0" y="538.96" class="st8"/><switch><g class="st17"><path d="M26708 -4673 L26708 -4673" class="st18" transform="matrix(0.0283465,0,0,0.0283465,-756.612,671.758)"/></g></switch><rect width=".945" height=".716" x="0" y="538.96" class="st8"/></g><g id="shape55-92" transform="translate(909.241,-274.713)"><title>Rectangle.55</title><desc>MSGraph</desc><rect width="55.741" height="25.995" x="0" y="513.681" class="st10"/><text x="8.75" y="529.68" class="st2">MSGraph</text></g><g id="shape56-95" transform="translate(928.111,-391.69)"><title>Dynamic connector.56</title><path d="M9 539.68 L9 623.62" class="st11"/></g><g id="shape58-100" transform="translate(878.145,615.793) rotate(177.838)"><title>Type inheritance</title><path d="M3.36 539.68 L3.72 539.68 L454.82 539.68" class="st19"/></g><g id="shape59-106" transform="translate(162.75,-0.25)"><title>Triangle.59</title><path d="M377.32 539.68 L188.66 354.86 L0 539.68 L377.32 539.68 Z" class="st1"/></g><g id="shape60-108" transform="translate(317.108,-95.0662)"><title>Sheet.60</title><desc>Target Tenant</desc><rect width="68.604" height="38.992" x="0" y="500.684" class="st1"/><text x="18.59" y="516.58" class="st7">Target <tspan x="17.2" class="st3" dy="1.2em">Tenant</tspan></text></g><g id="shape61-112" transform="translate(240.734,-24.7884)"><title>Sheet.61</title><desc>MigrationEndpoint - ApplicationId -AppSecretKeyVaultUrl - Rem...</desc><rect width="102.906" height="58.488" x="0" y="481.188" class="st1"/><text x="4" y="494.19" class="st2">MigrationEndpoint<tspan x="4" class="st3" dy="1.2em">-</tspan> ApplicationId<tspan x="4" class="st3" dy="1.2em">-</tspan>AppSecretKeyVaultUrl<tspan x="4" class="st3" dy="1.2em">-</tspan> RemoteTenant</text></g><g id="shape62-118" transform="translate(353.958,-11.8222)"><title>Sheet.62</title><desc>OrganizationRelationship With Source Tenant</desc><rect width="132.792" height="29.244" x="0" y="510.432" class="st1"/><text x="4" y="523.43" class="st2">OrganizationRelationship<tspan x="4" class="st3" dy="1.2em">With Source Tenant</tspan></text></g><g id="shape63-122" transform="translate(694.429,-0.25)"><title>Triangle.63</title><path d="M377.32 539.68 L188.66 354.86 L0 539.68 L377.32 539.68 Z" class="st1"/></g><g id="shape64-124" transform="translate(848.788,-95.0662)"><title>Sheet.64</title><desc>Source Tenant</desc><rect width="68.604" height="38.992" x="0" y="500.684" class="st1"/><text x="17.61" y="516.58" class="st7">Source <tspan x="17.2" class="st3" dy="1.2em">Tenant</tspan></text></g><g id="shape65-128" transform="translate(847.134,-5.48528)"><title>Sheet.65</title><desc>OrganizationRelationship - OAuthApplicationId (AppId of Tenan...</desc><rect width="161.232" height="73.825" x="0" y="465.851" class="st1"/><text x="4" y="478.85" class="st2">OrganizationRelationship<tspan x="4" class="st3" dy="1.2em">-</tspan> OAuthApplicationId (AppId of <tspan x="4" class="st3" dy="1.2em">TenantRelationship app)</tspan><tspan x="4" class="st3" dy="1.2em">-</tspan> MailboxMovePublishedScopes <tspan x="4" class="st3" dy="1.2em">(Security group created in 6)</tspan></text></g><g id="shape66-135" transform="translate(0.75,-203.066)"><title>Simple Double Arrow</title><path d="M0 539.68 L9 539.68 L63 539.68 L1116 539.68 L1125 539.68 L1116 539.68 L63 539.68 L9 539.68 L0 539.68 Z" class="st21"/></g><g id="shape67-137" transform="translate(19.875,-221.066)"><title>Sheet.67</title><desc>Azure</desc><rect width="97.875" height="72" x="0" y="467.676" class="st22"/><text x="27.83" y="509.08" class="st23">Azure</text></g><g id="shape68-140" transform="translate(18.75,-113.066)"><title>Sheet.68</title><desc>Exchange Online</desc><rect width="97.875" height="72" x="0" y="467.676" class="st22"/><text x="14.36" y="498.28" class="st23">Exchange<tspan x="24.91" class="st3" dy="1.2em">Online</tspan></text></g><g id="shape1000-144" transform="translate(985.741,-356.066)"><title>Sheet.1000</title><desc>After source admin consent TF App is assigned: - Mailbox.Migr...</desc><rect width="185.009" height="85.533" x="0" y="454.143" class="st13"/><text x="4" y="468.04" class="st14">After source admin consent TF App is <tspan x="4" class="st3" dy="1.2em">assigned: </tspan><tspan x="4" class="st3" dy="1.2em">-</tspan> Mailbox.Migration permission on <tspan x="4" class="st3" dy="1.2em">exchange. (Required)</tspan><tspan x="4" class="st3" dy="1.2em">-</tspan> Directory.ReadWrite.All app <tspan x="4" class="st3" dy="1.2em">permission on MSGraph (Optional)</tspan></text></g><g id="shape1001-153" transform="translate(203.844,-483.278)"><title>Rectangle.1001</title><desc>Target Tenant key vault contains tenant friending app secret.</desc><rect width="102.906" height="38.992" x="0" y="500.684" class="st1"/><text x="14.83" y="511.18" class="st2">Target Tenant key <tspan x="8.43" class="st3" dy="1.2em">vault contains tenant </tspan><tspan x="9.53" class="st3" dy="1.2em">friending app secret.</tspan></text></g><g id="shape1002-158" transform="translate(-181.892,395.233) rotate(-115.118)"><title>Simple Double Arrow.1002</title><path d="M0 539.68 L9.81 537.91 L9.81 538.79 L111.41 538.79 L111.41 537.91 L121.21 539.68 L111.41 541.44 L111.41 540.56 L9.81 540.56 L9.81 541.44 L0 539.68 Z" class="st24"/></g><g id="shape1003-160" transform="translate(81.4104,-13.0801)"><title>Sheet.1003</title><desc>ApplicationId of the tenant relationship app AppSecretKeyVaul...</desc><rect width="132.792" height="85.533" x="0" y="454.143" class="st13"/><text x="4" y="471.71" class="st16">ApplicationId of the <tspan x="4" class="st3" dy="1.2em">tenant relationship app</tspan><tspan x="4" class="st3" dy="1.2em">AppSecretKeyVaultUrl is </tspan><tspan x="4" class="st3" dy="1.2em">the url to the secret </tspan><tspan x="4" class="st3" dy="1.2em">certificate created in (2)</tspan></text></g><g id="shape1004-168" transform="translate(729.234,-5.48528)"><title>Sheet.1004</title><desc>SecurityGroup containing mbxs in scope for move</desc><rect width="88.817" height="50.481" x="0" y="489.195" class="st1"/><text x="15.27" y="505.44" class="st2">SecurityGroup <tspan x="6.28" class="st3" dy="1.2em">containing mbxs in </tspan><tspan x="13.04" class="st3" dy="1.2em">scope for move</tspan></text></g><g id="shape2001-173" transform="translate(293.25,-373.528)"><title>Circle.2001</title><desc>1</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">1</text></g><g id="shape2002-176" transform="translate(180.325,-509.066)"><title>Circle.2002</title><desc>2</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">2</text></g><g id="shape2003-179" transform="translate(917.009,-500.066)"><title>Circle.2003</title><desc>3</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">3</text></g><g id="shape2004-182" transform="translate(213.968,-71.6134)"><title>Circle.2004</title><desc>4</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">4</text></g><g id="shape2005-185" transform="translate(351.41,-56.2765)"><title>Circle.2005</title><desc>5</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">5</text></g><g id="shape2006-188" transform="translate(716.25,-41.0662)"><title>Circle.2006</title><desc>6</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">6</text></g><g id="shape2007-191" transform="translate(824.25,-72.5662)"><title>Circle.2007</title><desc>7</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">7</text></g><g id="shape2008-194" transform="translate(279.432,-50.1993) rotate(-6.83293)"><title>Simple Arrow.2008</title><path d="M0 539.68 L16.52 527.68 L16.52 533.68 L508.76 533.68 L508.76 539.68 L508.76 545.67 L16.52 545.67 L16.52 551.67 L0 539.68 Z" class="st27"/></g><g id="shape2009-196" transform="translate(586.196,-135.566)"><title>Circle.2009</title><desc>8</desc><path d="M0 526.18 A13.5 13.5 0 1 1 27 526.18 A13.5 13.5 0 0 1 0 526.18 Z" class="st25"/><text x="10.46" y="529.78" class="st26">8</text></g></g></svg>